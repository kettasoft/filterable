<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="favicon.ico"><title>Events | Filterable</title><meta name="description" content="Kettasoft Filterable - Powerful Eloquent Filtering Package">
    <link rel="preload" href="/filterable/assets/style-D3B0HkYg.css" as="style"><link rel="stylesheet" href="/filterable/assets/style-D3B0HkYg.css">
    <link rel="modulepreload" href="/filterable/assets/app-B7KVGiZu.js"><link rel="modulepreload" href="/filterable/assets/events.html-CrlSh8wg.js">
    <link rel="prefetch" href="/filterable/assets/index.html-BvZ9r5fG.js" as="script"><link rel="prefetch" href="/filterable/assets/authorization.html-DsT8kknv.js" as="script"><link rel="prefetch" href="/filterable/assets/get-started.html-LMmnZ3Tt.js" as="script"><link rel="prefetch" href="/filterable/assets/how-it-works.html-BcFhVhq_.js" as="script"><link rel="prefetch" href="/filterable/assets/installation.html-DQBSBaZc.js" as="script"><link rel="prefetch" href="/filterable/assets/introduction.html-C_NaPpCT.js" as="script"><link rel="prefetch" href="/filterable/assets/profile-management.html-Dsb_HmmC.js" as="script"><link rel="prefetch" href="/filterable/assets/profiler.html-CqTDFtRR.js" as="script"><link rel="prefetch" href="/filterable/assets/sanitization.html-BAGouOWN.js" as="script"><link rel="prefetch" href="/filterable/assets/service-provider.html-CubjRli_.js" as="script"><link rel="prefetch" href="/filterable/assets/sorting.html-3bMQCFDY.js" as="script"><link rel="prefetch" href="/filterable/assets/validation.html-DICU2Bcu.js" as="script"><link rel="prefetch" href="/filterable/assets/facade.html-DJF1POdM.js" as="script"><link rel="prefetch" href="/filterable/assets/filterable.html-DA6niOx6.js" as="script"><link rel="prefetch" href="/filterable/assets/payload.html-D5ry7HDq.js" as="script"><link rel="prefetch" href="/filterable/assets/sorter.html-CHYROlYp.js" as="script"><link rel="prefetch" href="/filterable/assets/api-reference.html-ChZkAKqM.js" as="script"><link rel="prefetch" href="/filterable/assets/auto-invalidation.html-A8oXszpM.js" as="script"><link rel="prefetch" href="/filterable/assets/examples.html-BYmgu-1E.js" as="script"><link rel="prefetch" href="/filterable/assets/getting-started.html-B2Bi5OpF.js" as="script"><link rel="prefetch" href="/filterable/assets/monitoring.html-BhFm5g_u.js" as="script"><link rel="prefetch" href="/filterable/assets/overview.html-BRPdTZfF.js" as="script"><link rel="prefetch" href="/filterable/assets/profiles.html-PUfT3vg3.js" as="script"><link rel="prefetch" href="/filterable/assets/scoping.html-zRbOsxqZ.js" as="script"><link rel="prefetch" href="/filterable/assets/strategies.html-BrVbMsr2.js" as="script"><link rel="prefetch" href="/filterable/assets/discover.html-DK2OYmW4.js" as="script"><link rel="prefetch" href="/filterable/assets/inspect.html-CePKm3Jn.js" as="script"><link rel="prefetch" href="/filterable/assets/listing.html-ldKGpkqa.js" as="script"><link rel="prefetch" href="/filterable/assets/setup.html-DBeKwqoV.js" as="script"><link rel="prefetch" href="/filterable/assets/testing.html-D8lxu0tc.js" as="script"><link rel="prefetch" href="/filterable/assets/closure.html-CXpVjZwu.js" as="script"><link rel="prefetch" href="/filterable/assets/expression.html-CPCxESSx.js" as="script"><link rel="prefetch" href="/filterable/assets/invokable.html-oLs6HgVL.js" as="script"><link rel="prefetch" href="/filterable/assets/rule-set.html-CCbpRE-Y.js" as="script"><link rel="prefetch" href="/filterable/assets/tree.html-B0BLN5FI.js" as="script"><link rel="prefetch" href="/filterable/assets/invoker.html-D2DoC_3g.js" as="script"><link rel="prefetch" href="/filterable/assets/aliasing.html-CtTx0gTN.js" as="script"><link rel="prefetch" href="/filterable/assets/auto-binding.html-B-Gtws0-.js" as="script"><link rel="prefetch" href="/filterable/assets/auto-register-filterable-macro.html-CU_lJiF2.js" as="script"><link rel="prefetch" href="/filterable/assets/conditional-logic.html-cI1IO-u2.js" as="script"><link rel="prefetch" href="/filterable/assets/custom-engines.html-CZx18yDO.js" as="script"><link rel="prefetch" href="/filterable/assets/data-provisioning.html-BU6wFMKy.js" as="script"><link rel="prefetch" href="/filterable/assets/header-driven-filter-mode.html-B4FLGqNZ.js" as="script"><link rel="prefetch" href="/filterable/assets/lifecycle-hooks.html-CktQcs9q.js" as="script"><link rel="prefetch" href="/filterable/assets/through.html-ByGz6cS2.js" as="script"><link rel="prefetch" href="/filterable/assets/404.html-DF9fKQsi.js" as="script"><link rel="prefetch" href="/filterable/assets/setupDevtools-7MC2TMWH-ClC2SvyW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/filterable/"><img class="vp-site-logo" src="/filterable/images/logo.png" alt="Filterable"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Filterable</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/filterable/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/filterable/installation.html" aria-label="üì¶ Installation"><!---->üì¶ Installation<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="CLI"><span class="title">CLI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="CLI"><span class="title">CLI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/setup.html" aria-label="Setting Up Filterable"><!---->Setting Up Filterable<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/discover.html" aria-label="Discover Command"><!---->Discover Command<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/listing.html" aria-label="Listing All Filters"><!---->Listing All Filters<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/testing.html" aria-label="Testing Filters"><!---->Testing Filters<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/inspect.html" aria-label="Inspecting Filterable Classes"><!---->Inspecting Filterable Classes<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/caching/overview.html" aria-label="Caching"><!---->Caching<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/kettasoft/filterable" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style="display:none;"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style=""><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/filterable/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/filterable/installation.html" aria-label="üì¶ Installation"><!---->üì¶ Installation<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="CLI"><span class="title">CLI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="CLI"><span class="title">CLI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/setup.html" aria-label="Setting Up Filterable"><!---->Setting Up Filterable<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/discover.html" aria-label="Discover Command"><!---->Discover Command<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/listing.html" aria-label="Listing All Filters"><!---->Listing All Filters<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/testing.html" aria-label="Testing Filters"><!---->Testing Filters<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/cli/inspect.html" aria-label="Inspecting Filterable Classes"><!---->Inspecting Filterable Classes<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Advanced"><span class="title">Advanced</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/filterable/caching/overview.html" aria-label="Caching"><!---->Caching<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/kettasoft/filterable" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/" aria-label="Home"><!---->Home<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/introduction.html" aria-label="Introduction"><!---->Introduction<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/installation.html" aria-label="Installation"><!---->Installation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/service-provider.html" aria-label="Service Provider"><!---->Service Provider<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/how-it-works.html" aria-label="How It Works"><!---->How It Works<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Engines <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/engines/invokable.html" aria-label="Invokable"><!---->Invokable<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/engines/tree.html" aria-label="Tree"><!---->Tree<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/engines/rule-set.html" aria-label="Ruleset"><!---->Ruleset<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/engines/expression.html" aria-label="Expression"><!---->Expression<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Features <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/lifecycle-hooks.html" aria-label="Lifecycle Hooks"><!---->Lifecycle Hooks<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/header-driven-filter-mode.html" aria-label="Header-Driven Filter Mode"><!---->Header-Driven Filter Mode<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/auto-register-filterable-macro.html" aria-label="Auto Register Filterable Macro"><!---->Auto Register Filterable Macro<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/conditional-logic.html" aria-label="Conditional Logic"><!---->Conditional Logic<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/aliasing.html" aria-label="Filter Aliases"><!---->Filter Aliases<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/through.html" aria-label="Through callbacks"><!---->Through callbacks<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/auto-binding.html" aria-label="Auto Binding"><!---->Auto Binding<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/custom-engines.html" aria-label="Custom engines"><!---->Custom engines<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/features/data-provisioning.html" aria-label="Data Provisioning"><!---->Data Provisioning<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Execution <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/execution/invoker.html" aria-label="Invoker"><!---->Invoker<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">API Reference <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/api/filterable.html" aria-label="Filterable"><!---->Filterable<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/api/facade.html" aria-label="Filterable facade"><!---->Filterable facade<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/api/payload.html" aria-label="Payload"><!---->Payload<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/api/sorter.html" aria-label="Sorter"><!---->Sorter<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Caching <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/overview.html" aria-label="Overview"><!---->Overview<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/getting-started.html" aria-label="Getting Started"><!---->Getting Started<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/strategies.html" aria-label="Strategies"><!---->Strategies<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/auto-invalidation.html" aria-label="Auto Invalidation"><!---->Auto Invalidation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/profiles.html" aria-label="Cache Profiles"><!---->Cache Profiles<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/scoping.html" aria-label="Scoping Cache"><!---->Scoping Cache<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/monitoring.html" aria-label="Monitoring Cached Items"><!---->Monitoring Cached Items<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/api-reference.html" aria-label="API Reference"><!---->API Reference<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/caching/examples.html" aria-label="Examples"><!---->Examples<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">CLI <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/cli/setup.html" aria-label="Setup Filterable"><!---->Setup Filterable<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/cli/discover.html" aria-label="Discover Filters"><!---->Discover Filters<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/cli/testing.html" aria-label="Test Filter"><!---->Test Filter<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/cli/listing.html" aria-label="List Filters"><!---->List Filters<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/filterable/cli/inspect.html" aria-label="Inspect Filter"><!---->Inspect Filter<!----></a><!----></li><!--]--></ul></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/filterable/events.html" aria-label="Event System"><!---->Event System<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/profile-management.html" aria-label="Profile Management"><!---->Profile Management<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/profiler.html" aria-label="Profiler"><!---->Profiler<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/sorting.html" aria-label="Sorting"><!---->Sorting<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/authorization.html" aria-label="Authorization"><!---->Authorization<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/validation.html" aria-label="Validation"><!---->Validation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/filterable/sanitization.html" aria-label="Sanitization"><!---->Sanitization<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="events" tabindex="-1"><a class="header-anchor" href="#events"><span>Events</span></a></h1><p>The Filterable Event System allows you to listen to lifecycle events during filtering operations. This provides powerful hooks for logging, monitoring, analytics, auditing, and implementing custom business logic that reacts to filtering activities.</p><h2 id="table-of-contents" tabindex="-1"><a class="header-anchor" href="#table-of-contents"><span>Table of Contents</span></a></h2><ul><li><a href="#introduction">Introduction</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#available-events">Available Events</a></li><li><a href="#registering-event-listeners">Registering Event Listeners</a><ul><li><a href="#global-listeners">Global Listeners</a></li><li><a href="#filter-specific-observers">Filter-Specific Observers</a></li></ul></li><li><a href="#event-payloads">Event Payloads</a></li><li><a href="#enabling-disabling-events">Enabling/Disabling Events</a></li><li><a href="#use-cases">Use Cases</a></li><li><a href="#exception-handling">Exception Handling</a></li><li><a href="#api-reference">API Reference</a></li></ul><hr><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h2><p>The event system is lightweight, framework-agnostic (though designed for Laravel), and doesn&#39;t depend on Laravel&#39;s Event facade. It uses a simple pub-sub pattern that integrates seamlessly with the filterable lifecycle.</p><p><strong>Key Features:</strong></p><ul><li>üéØ Global and filter-specific event listeners</li><li>üõ°Ô∏è Safe exception handling (listener failures won&#39;t crash your app)</li><li>‚öôÔ∏è Configurable (can be disabled globally or per instance)</li><li>üìä Perfect for logging, monitoring, and analytics</li><li>üß™ Easy to test with listener flushing</li></ul><hr><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h2><p>Enable or disable the event system in <code>config/filterable.php</code>:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token string single-quoted-string">&#39;events&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token comment">/*</span>
<span class="line">    |--------------------------------------------------------------------------</span>
<span class="line">    | Enable or Disable Event System</span>
<span class="line">    |--------------------------------------------------------------------------</span>
<span class="line">    |</span>
<span class="line">    | This option allows you to enable or disable the event system globally.</span>
<span class="line">    | When disabled, no event listeners or observers will be triggered.</span>
<span class="line">    |</span>
<span class="line">    */</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;enabled&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;FILTERABLE_EVENTS_ENABLED&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can also set this in your <code>.env</code> file:</p><div class="language-env line-numbers-mode" data-highlighter="prismjs" data-ext="env" data-title="env"><pre><code><span class="line">FILTERABLE_EVENTS_ENABLED=true</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="available-events" tabindex="-1"><a class="header-anchor" href="#available-events"><span>Available Events</span></a></h2><p>The following events are dispatched during the filterable lifecycle:</p><table><thead><tr><th>Event Name</th><th>Description</th><th>When Fired</th><th>Payload</th></tr></thead><tbody><tr><td><code>filterable.initializing</code></td><td>A new Filterable instance is being created</td><td>Constructor start</td><td><code>$filterable</code></td></tr><tr><td><code>filterable.resolved</code></td><td>Engine and request data have been resolved</td><td>Constructor end</td><td><code>$filterable, $engine, $data</code></td></tr><tr><td><code>filterable.applied</code></td><td>Filters have been executed successfully</td><td>After successful <code>apply()</code></td><td><code>$filterable, $builder</code></td></tr><tr><td><code>filterable.failed</code></td><td>An exception occurred during <code>apply()</code></td><td>Catch block in <code>apply()</code></td><td><code>$filterable, $exception, $builder</code></td></tr><tr><td><code>filterable.finished</code></td><td>Filtering lifecycle has completed</td><td>Finally block in <code>apply()</code></td><td><code>$filterable, $builder</code></td></tr></tbody></table><hr><h2 id="registering-event-listeners" tabindex="-1"><a class="header-anchor" href="#registering-event-listeners"><span>Registering Event Listeners</span></a></h2><h3 id="global-listeners" tabindex="-1"><a class="header-anchor" href="#global-listeners"><span>Global Listeners</span></a></h3><p>Global listeners are triggered for <strong>all</strong> filterable instances, regardless of the filter class.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">Kettasoft<span class="token punctuation">\</span>Filterable<span class="token punctuation">\</span>Filterable</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Filter applied&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;filter_class&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;sql&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">toSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;bindings&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getBindings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Registering Multiple Listeners:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// Log when filters start initializing</span></span>
<span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.initializing&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Initializing filter: &quot;</span> <span class="token operator">.</span> <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Track successful applications</span></span>
<span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">metrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filters.applied&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Handle failures</span></span>
<span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.failed&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Throwable</span> <span class="token variable">$exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Filter failed&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;filter&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;error&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$exception</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filter-specific-observers" tabindex="-1"><a class="header-anchor" href="#filter-specific-observers"><span>Filter-Specific Observers</span></a></h3><p>Observers are called only for specific filter classes. This is ideal for filter-specific logging or side effects.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Filters<span class="token punctuation">\</span>PostFilter</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Kettasoft<span class="token punctuation">\</span>Filterable<span class="token punctuation">\</span>Filterable</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Kettasoft<span class="token punctuation">\</span>Filterable<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Events<span class="token punctuation">\</span>FilterableState</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">FilterableState</span> <span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// $event is the event name without &#39;filterable.&#39; prefix</span></span>
<span class="line">    <span class="token comment">// $filterable is instance of Filterable</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$event</span><span class="token operator">-&gt;</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;applied&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">activity</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">-&gt;</span><span class="token function">causedBy</span><span class="token punctuation">(</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">-&gt;</span><span class="token function">performedOn</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token operator">-&gt;</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;PostFilter was applied&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Multiple Observers:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token class-name static-context">UserFilter</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">match</span> <span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;initializing&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;UserFilter initializing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;applied&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;UserFilter applied successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;failed&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;UserFilter failed&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;error&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token keyword">default</span> <span class="token operator">=&gt;</span> <span class="token constant">null</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="event-payloads" tabindex="-1"><a class="header-anchor" href="#event-payloads"><span>Event Payloads</span></a></h2><p>Each event receives different payload data:</p><h3 id="filterable-initializing" tabindex="-1"><a class="header-anchor" href="#filterable-initializing"><span><code>filterable.initializing</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// $filterable: The Filterable instance</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filterable-resolved" tabindex="-1"><a class="header-anchor" href="#filterable-resolved"><span><code>filterable.resolved</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$engine</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// $engine: The resolved Engine instance</span></span>
<span class="line">    <span class="token comment">// $data: Parsed request data array</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filterable-applied" tabindex="-1"><a class="header-anchor" href="#filterable-applied"><span><code>filterable.applied</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// $filterable: The Filterable instance</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filterable-failed" tabindex="-1"><a class="header-anchor" href="#filterable-failed"><span><code>filterable.failed</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">,</span> <span class="token variable">$exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// $filterable: The Filterable instance</span></span>
<span class="line">    <span class="token comment">// $exception: The Throwable that was caught</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="filterable-finished" tabindex="-1"><a class="header-anchor" href="#filterable-finished"><span><code>filterable.finished</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// $filterable: The Filterable instance</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="enabling-disabling-events" tabindex="-1"><a class="header-anchor" href="#enabling-disabling-events"><span>Enabling/Disabling Events</span></a></h2><h3 id="global-configuration" tabindex="-1"><a class="header-anchor" href="#global-configuration"><span>Global Configuration</span></a></h3><p>Disable events globally in <code>config/filterable.php</code>:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token string single-quoted-string">&#39;events&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;enabled&#39;</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="per-instance-control" tabindex="-1"><a class="header-anchor" href="#per-instance-control"><span>Per-Instance Control</span></a></h3><p>Override the global setting for specific instances:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token comment">// Disable events for this instance</span></span>
<span class="line"><span class="token variable">$filter</span> <span class="token operator">=</span> <span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">disableEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Enable events for this instance (even if globally disabled)</span></span>
<span class="line"><span class="token variable">$filter</span> <span class="token operator">=</span> <span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">enableEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="conditional-event-control" tabindex="-1"><a class="header-anchor" href="#conditional-event-control"><span>Conditional Event Control</span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$filter</span> <span class="token operator">=</span> <span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;production&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token variable">$f</span><span class="token operator">-&gt;</span><span class="token function">disableEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token variable">$builder</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="use-cases" tabindex="-1"><a class="header-anchor" href="#use-cases"><span>Use Cases</span></a></h2><h3 id="_1-audit-logging" tabindex="-1"><a class="header-anchor" href="#_1-audit-logging"><span>1. Audit Logging</span></a></h3><p>Track who applied which filters and when:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">AuditLog</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;user_id&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;filter_class&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;filters_applied&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;sql_query&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">toSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;timestamp&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-performance-monitoring" tabindex="-1"><a class="header-anchor" href="#_2-performance-monitoring"><span>2. Performance Monitoring</span></a></h3><p>Track slow filters:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.finished&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$executionTime</span> <span class="token operator">=</span> <span class="token function">microtime</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token constant">LARAVEL_START</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$executionTime</span> <span class="token operator">&gt;</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Slow filter detected&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;filter&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;execution_time&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$executionTime</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;sql&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">toSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-analytics-metrics" tabindex="-1"><a class="header-anchor" href="#_3-analytics-metrics"><span>3. Analytics &amp; Metrics</span></a></h3><p>Collect usage statistics:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">Redis</span><span class="token operator">::</span><span class="token function">hincrby</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filter_stats&#39;</span><span class="token punctuation">,</span> <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token function">array_keys</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$field</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name static-context">Redis</span><span class="token operator">::</span><span class="token function">hincrby</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filter_fields&#39;</span><span class="token punctuation">,</span> <span class="token variable">$field</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-error-notifications" tabindex="-1"><a class="header-anchor" href="#_4-error-notifications"><span>4. Error Notifications</span></a></h3><p>Send alerts when filters fail:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.failed&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Throwable</span> <span class="token variable">$exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">Notification</span><span class="token operator">::</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;slack&#39;</span><span class="token punctuation">,</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;logging.slack_webhook&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">-&gt;</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FilterFailureNotification</span><span class="token punctuation">(</span></span>
<span class="line">            <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token variable">$exception</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token variable">$filterable</span><span class="token operator">-&gt;</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-cache-invalidation" tabindex="-1"><a class="header-anchor" href="#_5-cache-invalidation"><span>5. Cache Invalidation</span></a></h3><p>Clear relevant caches when filters are applied:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$event</span> <span class="token operator">===</span> <span class="token string single-quoted-string">&#39;applied&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name static-context">Cache</span><span class="token operator">::</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;filters&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-development-debugging" tabindex="-1"><a class="header-anchor" href="#_6-development-debugging"><span>6. Development Debugging</span></a></h3><p>Log all filter activity in development:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;local&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.resolved&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$engine</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Filter Resolved&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;engine&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">get_class</span><span class="token punctuation">(</span><span class="token variable">$engine</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;data&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$data</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="exception-handling" tabindex="-1"><a class="header-anchor" href="#exception-handling"><span>Exception Handling</span></a></h2><p>The event system handles exceptions gracefully. If a listener throws an exception, it will be caught and logged without breaking the filtering process.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// This will be caught and logged, but won&#39;t crash the app</span></span>
<span class="line">    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Exception</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Listener failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// The filter will still work correctly</span></span>
<span class="line"><span class="token variable">$results</span> <span class="token operator">=</span> <span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token variable">$builder</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Exception Logging:</strong></p><p>Failed listeners are logged using Laravel&#39;s logger (if available) or <code>error_log()</code>:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">[2025-10-14 10:23:45] production.ERROR: Filterable event listener failed for event &#39;filterable.applied&#39;: Listener failed! {&quot;event&quot;:&quot;filterable.applied&quot;,&quot;type&quot;:&quot;listener&quot;,&quot;exception&quot;:{...},&quot;filterable_class&quot;:&quot;App\\Http\\Filters\\PostFilter&quot;}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="api-reference" tabindex="-1"><a class="header-anchor" href="#api-reference"><span>API Reference</span></a></h2><h3 id="static-methods" tabindex="-1"><a class="header-anchor" href="#static-methods"><span>Static Methods</span></a></h3><h4 id="filterable-on-string-event-callable-callback-void" tabindex="-1"><a class="header-anchor" href="#filterable-on-string-event-callable-callback-void"><span><code>Filterable::on(string $event, callable $callback): void</code></span></a></h4><p>Register a global event listener for all filterable instances.</p><p><strong>Parameters:</strong></p><ul><li><code>$event</code>: The event name (e.g., <code>&#39;filterable.applied&#39;</code>)</li><li><code>$callback</code>: The callback to execute when the event fires</li></ul><p><strong>Example:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">logger</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;Filter applied&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="filterable-observe-string-filterclass-callable-callback-void" tabindex="-1"><a class="header-anchor" href="#filterable-observe-string-filterclass-callable-callback-void"><span><code>Filterable::observe(string $filterClass, callable $callback): void</code></span></a></h4><p>Register an observer for a specific filter class.</p><p><strong>Parameters:</strong></p><ul><li><code>$filterClass</code>: The fully qualified filter class name</li><li><code>$callback</code>: The observer callback receiving <code>($event, $filterable)</code></li></ul><p><strong>Example:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Filterable</span> <span class="token variable">$filterable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$event</span> <span class="token operator">===</span> <span class="token string single-quoted-string">&#39;applied&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Handle the event</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="filterable-flushlisteners-void" tabindex="-1"><a class="header-anchor" href="#filterable-flushlisteners-void"><span><code>Filterable::flushListeners(): void</code></span></a></h4><p>Remove all registered event listeners and observers.</p><p><strong>Example:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">flushListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h4 id="filterable-getlisteners-string-event-array" tabindex="-1"><a class="header-anchor" href="#filterable-getlisteners-string-event-array"><span><code>Filterable::getListeners(string $event): array</code></span></a></h4><p>Get all registered listeners for a specific event.</p><p><strong>Parameters:</strong></p><ul><li><code>$event</code>: The event name</li></ul><p><strong>Returns:</strong> Array of callable listeners</p><p><strong>Example:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$listeners</span> <span class="token operator">=</span> <span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">getListeners</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h4 id="filterable-getobservers-string-filterclass-array" tabindex="-1"><a class="header-anchor" href="#filterable-getobservers-string-filterclass-array"><span><code>Filterable::getObservers(string $filterClass): array</code></span></a></h4><p>Get all registered observers for a specific filter class.</p><p><strong>Parameters:</strong></p><ul><li><code>$filterClass</code>: The filter class name</li></ul><p><strong>Returns:</strong> Array of callable observers</p><p><strong>Example:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$observers</span> <span class="token operator">=</span> <span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">getObservers</span><span class="token punctuation">(</span><span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="instance-methods" tabindex="-1"><a class="header-anchor" href="#instance-methods"><span>Instance Methods</span></a></h3><h4 id="enableevents-static" tabindex="-1"><a class="header-anchor" href="#enableevents-static"><span><code>enableEvents(): static</code></span></a></h4><p>Enable events for this specific filterable instance.</p><p><strong>Example:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$filter</span> <span class="token operator">=</span> <span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">enableEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h4 id="disableevents-static" tabindex="-1"><a class="header-anchor" href="#disableevents-static"><span><code>disableEvents(): static</code></span></a></h4><p>Disable events for this specific filterable instance.</p><p><strong>Example:</strong></p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token variable">$filter</span> <span class="token operator">=</span> <span class="token class-name static-context">PostFilter</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">disableEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="best-practices" tabindex="-1"><a class="header-anchor" href="#best-practices"><span>Best Practices</span></a></h2><ol><li><p><strong>Keep listeners lightweight</strong>: Avoid heavy processing in event listeners to prevent performance degradation.</p></li><li><p><strong>Use queued jobs for expensive operations</strong>: If you need to perform heavy tasks, dispatch a job from the listener:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.applied&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">,</span> <span class="token variable">$builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">ProcessFilterAnalytics</span><span class="token operator">::</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token variable">$filterable</span><span class="token punctuation">,</span> <span class="token variable">$builder</span><span class="token operator">-&gt;</span><span class="token function">toSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Disable in production if not needed</strong>: If you&#39;re only using events for debugging, disable them in production:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token string single-quoted-string">&#39;events&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;enabled&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;FILTERABLE_EVENTS_ENABLED&#39;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;production&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Use observers for filter-specific logic</strong>: Keep global listeners for cross-cutting concerns and use observers for filter-specific behavior.</p></li><li><p><strong>Always flush in tests</strong>: Prevent test pollution by flushing listeners in <code>tearDown()</code>:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">Filterable</span><span class="token operator">::</span><span class="token function">flushListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/kettasoft/filterable/edit/main/events.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->Edit this page<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: kettasoft@gmail.com">kettasoft</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/filterable/profile-management.html" aria-label="Profile Management"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Profile Management</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><div class="particles-wrapper" data-v-286d6cfe><!----></div><!--]--><!--]--></div>
    <script type="module" src="/filterable/assets/app-B7KVGiZu.js" defer></script>
  </body>
</html>
