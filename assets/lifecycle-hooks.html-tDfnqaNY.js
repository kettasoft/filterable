import{_ as s,c as a,a as e,o as t}from"./app-DC3ExQOn.js";const l={};function i(o,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h1 id="lifecycle-hooks" tabindex="-1"><a class="header-anchor" href="#lifecycle-hooks"><span>Lifecycle Hooks</span></a></h1><p>The <code>Filterable</code> base class provides two lifecycle hooks that let you modify the query builder <strong>before</strong> and <strong>after</strong> filters are applied.</p><p>These hooks are <strong>optional</strong> and can be defined directly inside your filter class.</p><hr><h4 id="initially" tabindex="-1"><a class="header-anchor" href="#initially"><span><strong><code>initially()</code></strong></span></a></h4><p>Runs <strong>before any filters are executed</strong>. It‚Äôs perfect for setting up default query conditions or preparing the builder.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">use</span> <span class="token package">Kettasoft<span class="token punctuation">\\</span>Filterable<span class="token punctuation">\\</span>Filterable</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Builder</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">ProductFilter</span> <span class="token keyword">extends</span> <span class="token class-name">Filterable</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">initially</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$builder</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Example: Apply a global condition before filtering</span></span>
<span class="line">        <span class="token variable">$builder</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;is_active&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="finally" tabindex="-1"><a class="header-anchor" href="#finally"><span><strong><code>finally()</code></strong></span></a></h4><p>Runs <strong>after all filters have been processed</strong>. It allows you to finalize or clean up your query logic.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">finally</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$builder</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Example: Apply a default sort order</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token variable">$builder</span><span class="token operator">-&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">orders</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$builder</span><span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;desc&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="‚öôÔ∏è-how-it-works" tabindex="-1"><a class="header-anchor" href="#‚öôÔ∏è-how-it-works"><span>‚öôÔ∏è How It Works</span></a></h4><ul><li><code>initially()</code> is invoked <strong>right before</strong> any filter method runs.</li><li><code>finally()</code> is called <strong>after</strong> all filter methods have finished.</li><li>Both are <strong>optional</strong> ‚Äî if not defined, they‚Äôre skipped automatically.</li><li>They share the same <code>$builder</code> instance used by the engine, so any change persists through the filtering process.</li></ul><hr><h4 id="ü™Ñ-cli-integration" tabindex="-1"><a class="header-anchor" href="#ü™Ñ-cli-integration"><span>ü™Ñ CLI Integration</span></a></h4><p>When generating a new filter using the Artisan command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan make:filter ProductFilter</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Both <code>initially()</code> and <code>finally()</code> methods are automatically added to the stub file, ready for customization.</p><hr><h4 id="üí°-practical-use-cases" tabindex="-1"><a class="header-anchor" href="#üí°-practical-use-cases"><span>üí° Practical Use Cases</span></a></h4><ul><li><p>Use <code>initially()</code> to:</p><ul><li>Apply global constraints (<code>is_active = true</code>, <code>tenant_id = currentTenant()</code>).</li><li>Add necessary joins or eager loads before filters run.</li></ul></li><li><p>Use <code>finally()</code> to:</p><ul><li>Apply ordering or limits.</li><li>Clean up relations or add post-filter transformations.</li></ul></li></ul>`,22)]))}const c=s(l,[["render",i],["__file","lifecycle-hooks.html.vue"]]),r=JSON.parse('{"path":"/features/lifecycle-hooks.html","title":"Lifecycle Hooks","lang":"en-US","frontmatter":{},"headers":[],"git":{"updatedTime":1762969237000,"contributors":[{"name":"kettasoft","email":"kettasoft@gmail.com","commits":1}]},"filePathRelative":"features/lifecycle-hooks.md"}');export{c as comp,r as data};
