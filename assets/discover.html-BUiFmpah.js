import{_ as s,c as n,a,o as i}from"./app-CtgDxhxt.js";const t={};function l(d,e){return i(),n("div",null,e[0]||(e[0]=[a(`<h1 id="discover-command" tabindex="-1"><a class="header-anchor" href="#discover-command"><span>Discover Command</span></a></h1><p>The <code>filterable:discover</code> command automatically analyzes your Eloquent models to discover searchable columns, suggest indexes.</p><h2 id="basic-usage" tabindex="-1"><a class="header-anchor" href="#basic-usage"><span>Basic Usage</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This will scan the <code>Post</code> model and display:</p><ul><li>Searchable columns (text-based fields)</li><li>Filterable columns (foreign keys, status fields, etc.)</li><li>Relationships with other models</li><li>Current indexing status</li></ul><h2 id="options" tabindex="-1"><a class="header-anchor" href="#options"><span>Options</span></a></h2><h3 id="suggest-indexes" tabindex="-1"><a class="header-anchor" href="#suggest-indexes"><span><code>--suggest-indexes</code></span></a></h3><p>Analyze columns and suggest indexes to improve query performance.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post --suggest-indexes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ğŸ’¡ Index Suggestions:</span>
<span class="line"></span>
<span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="line">â”‚ Column  â”‚ Index Typeâ”‚ Reason                                   â”‚</span>
<span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="line">â”‚ content â”‚ FULLTEXT  â”‚ Searchable column - will improve search  â”‚</span>
<span class="line">â”‚ status  â”‚ INDEX     â”‚ Filterable column - used in WHERE        â”‚</span>
<span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="create-indexes" tabindex="-1"><a class="header-anchor" href="#create-indexes"><span><code>--create-indexes</code></span></a></h3><p>Automatically create the suggested indexes on your database.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post --suggest-indexes --create-indexes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>This will modify your database schema. Make sure to backup your database before running this in production.</p></div><h3 id="analyze-data" tabindex="-1"><a class="header-anchor" href="#analyze-data"><span><code>--analyze-data</code></span></a></h3><p>Analyze actual data in the table to provide better insights.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post --analyze-data</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">ğŸ“Š Data Analysis:</span>
<span class="line"></span>
<span class="line">title:</span>
<span class="line">  Distinct values: 342</span>
<span class="line">  Null count: 0</span>
<span class="line">  Avg length: 48.50</span>
<span class="line">  Samples: Laravel Tutorial, PHP Best Practices, Advanced Vue.js</span>
<span class="line"></span>
<span class="line">status:</span>
<span class="line">  Distinct values: 3</span>
<span class="line">  Null count: 0</span>
<span class="line">  Samples: published, draft, archived</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="connection" tabindex="-1"><a class="header-anchor" href="#connection"><span><code>--connection</code></span></a></h3><p>Use a specific database connection for analysis.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post <span class="token parameter variable">--connection</span><span class="token operator">=</span>tenant_db</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="complete-workflow" tabindex="-1"><a class="header-anchor" href="#complete-workflow"><span>Complete Workflow</span></a></h2><h3 id="_1-discovery-and-analysis" tabindex="-1"><a class="header-anchor" href="#_1-discovery-and-analysis"><span>1. Discovery and Analysis</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post --analyze-data</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-review-suggestions" tabindex="-1"><a class="header-anchor" href="#_2-review-suggestions"><span>2. Review Suggestions</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post --suggest-indexes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-create-indexes" tabindex="-1"><a class="header-anchor" href="#_3-create-indexes"><span>3. Create Indexes</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post --suggest-indexes --create-indexes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="output-breakdown" tabindex="-1"><a class="header-anchor" href="#output-breakdown"><span>Output Breakdown</span></a></h2><h3 id="searchable-columns" tabindex="-1"><a class="header-anchor" href="#searchable-columns"><span>Searchable Columns</span></a></h3><p>Columns that are suitable for text-based searching:</p><table><thead><tr><th>Column Type</th><th>Examples</th></tr></thead><tbody><tr><td><strong>Text Fields</strong></td><td><code>title</code>, <code>description</code>, <code>content</code>, <code>excerpt</code></td></tr><tr><td><strong>Name Fields</strong></td><td><code>name</code>, <code>username</code>, <code>full_name</code></td></tr><tr><td><strong>Email Fields</strong></td><td><code>email</code>, <code>contact_email</code></td></tr><tr><td><strong>String Fields</strong></td><td><code>slug</code>, <code>code</code>, <code>reference</code></td></tr></tbody></table><h3 id="filterable-columns" tabindex="-1"><a class="header-anchor" href="#filterable-columns"><span>Filterable Columns</span></a></h3><p>Columns that are suitable for filtering:</p><table><thead><tr><th>Column Type</th><th>Examples</th></tr></thead><tbody><tr><td><strong>Foreign Keys</strong></td><td><code>user_id</code>, <code>category_id</code>, <code>parent_id</code></td></tr><tr><td><strong>Status Fields</strong></td><td><code>status</code>, <code>state</code>, <code>type</code></td></tr><tr><td><strong>Boolean Fields</strong></td><td><code>is_active</code>, <code>is_published</code>, <code>featured</code></td></tr><tr><td><strong>Enum Fields</strong></td><td><code>role</code>, <code>priority</code>, <code>visibility</code></td></tr></tbody></table><h3 id="relationships" tabindex="-1"><a class="header-anchor" href="#relationships"><span>Relationships</span></a></h3><p>Discovered Eloquent relationships:</p><table><thead><tr><th>Relationship</th><th>Type</th><th>Related Model</th><th>Searchable</th></tr></thead><tbody><tr><td><code>user</code></td><td>BelongsTo</td><td>User</td><td>âœ…</td></tr><tr><td><code>category</code></td><td>BelongsTo</td><td>Category</td><td>âœ…</td></tr><tr><td><code>comments</code></td><td>HasMany</td><td>Comment</td><td>âŒ</td></tr><tr><td><code>tags</code></td><td>BelongsToMany</td><td>Tag</td><td>âœ…</td></tr></tbody></table><h2 id="examples" tabindex="-1"><a class="header-anchor" href="#examples"><span>Examples</span></a></h2><h3 id="example-1-blog-post-model" tabindex="-1"><a class="header-anchor" href="#example-1-blog-post-model"><span>Example 1: Blog Post Model</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post --suggest-indexes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Discovered Columns:</strong></p><ul><li><strong>Searchable:</strong> title, content, excerpt, slug</li><li><strong>Filterable:</strong> status, category_id, user_id, is_featured</li><li><strong>Relationships:</strong> user (BelongsTo), category (BelongsTo), comments (HasMany), tags (BelongsToMany)</li></ul><h3 id="example-2-e-commerce-product-model" tabindex="-1"><a class="header-anchor" href="#example-2-e-commerce-product-model"><span>Example 2: E-commerce Product Model</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Product --analyze-data --suggest-indexes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Discovered Columns:</strong></p><ul><li><strong>Searchable:</strong> name, description, sku</li><li><strong>Filterable:</strong> category_id, brand_id, status, in_stock</li><li><strong>Relationships:</strong> category, brand, variants, reviews</li></ul><p><strong>Analysis:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">name:</span>
<span class="line">  Distinct values: 1,542</span>
<span class="line">  Avg length: 45.30</span>
<span class="line"></span>
<span class="line">sku:</span>
<span class="line">  Distinct values: 1,542</span>
<span class="line">  Null count: 0</span>
<span class="line">  Pattern: Unique identifiers</span>
<span class="line"></span>
<span class="line">status:</span>
<span class="line">  Distinct values: 4</span>
<span class="line">  Values: active, inactive, out_of_stock, discontinued</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="example-3-user-model" tabindex="-1"><a class="header-anchor" href="#example-3-user-model"><span>Example 3: User Model</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover User</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>Discovered Columns:</strong></p><ul><li><strong>Searchable:</strong> name, email, username</li><li><strong>Filterable:</strong> role, status, email_verified_at</li><li><strong>Relationships:</strong> posts, comments, profile</li></ul><h2 id="index-recommendations" tabindex="-1"><a class="header-anchor" href="#index-recommendations"><span>Index Recommendations</span></a></h2><p>The discover command suggests indexes based on:</p><h3 id="priority-1-foreign-keys" tabindex="-1"><a class="header-anchor" href="#priority-1-foreign-keys"><span>Priority 1: Foreign Keys</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> posts_user_id_index <span class="token keyword">ON</span> posts<span class="token punctuation">(</span>user_id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> posts_category_id_index <span class="token keyword">ON</span> posts<span class="token punctuation">(</span>category_id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="priority-2-frequently-filtered-columns" tabindex="-1"><a class="header-anchor" href="#priority-2-frequently-filtered-columns"><span>Priority 2: Frequently Filtered Columns</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> posts_status_index <span class="token keyword">ON</span> posts<span class="token punctuation">(</span><span class="token keyword">status</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> users_role_index <span class="token keyword">ON</span> users<span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="priority-3-searchable-text-columns" tabindex="-1"><a class="header-anchor" href="#priority-3-searchable-text-columns"><span>Priority 3: Searchable Text Columns</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> FULLTEXT <span class="token keyword">INDEX</span> posts_title_content_fulltext <span class="token keyword">ON</span> posts<span class="token punctuation">(</span>title<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="best-practices" tabindex="-1"><a class="header-anchor" href="#best-practices"><span>Best Practices</span></a></h2><div class="hint-container tip"><p class="hint-container-title">Discovery Workflow</p><ol><li><strong>Run discovery first</strong> to understand your model structure</li><li><strong>Review suggestions</strong> before creating indexes</li><li><strong>Test performance</strong> after adding indexes</li></ol></div><div class="hint-container tip"><p class="hint-container-title">Multi-Tenant Applications</p><p>Use <code>--connection</code> to analyze tenant-specific databases:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post <span class="token parameter variable">--connection</span><span class="token operator">=</span>tenant_1_db</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan filterable:discover Post <span class="token parameter variable">--connection</span><span class="token operator">=</span>tenant_1_db</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></div><div class="hint-container tip"><p class="hint-container-title">Large Tables</p><p>Use <code>--analyze-data</code> cautiously on large tables as it may take time:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># For tables with millions of rows, skip data analysis</span></span>
<span class="line">php artisan filterable:discover Product --suggest-indexes</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting"><span>Troubleshooting</span></a></h2><h3 id="model-not-found" tabindex="-1"><a class="header-anchor" href="#model-not-found"><span>Model Not Found</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Try with full namespace</span></span>
<span class="line">php artisan filterable:discover <span class="token string">&quot;App\\Models\\Post&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Check model exists</span></span>
<span class="line">php artisan tinker</span>
<span class="line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> class_exists<span class="token punctuation">(</span><span class="token string">&#39;App\\Models\\Post&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="connection-issues" tabindex="-1"><a class="header-anchor" href="#connection-issues"><span>Connection Issues</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># List available connections</span></span>
<span class="line">php artisan db:show</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Test specific connection</span></span>
<span class="line">php artisan filterable:discover Post <span class="token parameter variable">--connection</span><span class="token operator">=</span>mysql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="no-columns-discovered" tabindex="-1"><a class="header-anchor" href="#no-columns-discovered"><span>No Columns Discovered</span></a></h3><p><strong>Possible reasons:</strong></p><ul><li>Table doesn&#39;t exist</li><li>Model&#39;s <code>$table</code> property is incorrect</li><li>Database connection is misconfigured</li></ul><p><strong>Solution:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Verify table exists</span></span>
<span class="line">php artisan tinker</span>
<span class="line"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">\\</span>App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Post::first<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="index-creation-failed" tabindex="-1"><a class="header-anchor" href="#index-creation-failed"><span>Index Creation Failed</span></a></h3><p><strong>Common causes:</strong></p><ul><li>Insufficient database permissions</li><li>Index already exists</li><li>Column type not supported for FULLTEXT</li></ul><p><strong>Solution:</strong></p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Check database user permissions</span></span>
<span class="line">SHOW GRANTS FOR CURRENT_USER<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Manually create index</span></span>
<span class="line">CREATE INDEX posts_title_index ON posts<span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="advanced-usage" tabindex="-1"><a class="header-anchor" href="#advanced-usage"><span>Advanced Usage</span></a></h2><h3 id="combining-with-other-commands" tabindex="-1"><a class="header-anchor" href="#combining-with-other-commands"><span>Combining with Other Commands</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Discover, create indexes, and test</span></span>
<span class="line">php artisan filterable:discover Post --suggest-indexes --create-indexes</span>
<span class="line">php artisan filterable:test PostFilter <span class="token parameter variable">--model</span><span class="token operator">=</span>Post</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="batch-discovery" tabindex="-1"><a class="header-anchor" href="#batch-discovery"><span>Batch Discovery</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Discover multiple models</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token for-or-select variable">model</span> <span class="token keyword">in</span> Post User Product Category<span class="token punctuation">;</span> <span class="token keyword">do</span></span>
<span class="line">  php artisan filterable:discover <span class="token variable">$model</span> --suggest-indexes</span>
<span class="line"><span class="token keyword">done</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ci-cd-integration" tabindex="-1"><a class="header-anchor" href="#ci-cd-integration"><span>CI/CD Integration</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token comment"># .github/workflows/discover-filters.yml</span></span>
<span class="line"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Discover and Analyze Models</span>
<span class="line">  <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string"></span>
<span class="line">      php artisan filterable:discover Post --suggest-indexes</span>
<span class="line">      php artisan filterable:discover User --suggest-indexes</span>
<span class="line">      php artisan filterable:discover Product --suggest-indexes</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="migration-generation" tabindex="-1"><a class="header-anchor" href="#migration-generation"><span>Migration Generation</span></a></h2><p>After discovering indexes, you can create a migration:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">php artisan make:migration add_filterable_indexes_to_posts_table</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;posts&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;status&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;category_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">fullText</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;content&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>The <code>filterable:discover</code> command is a powerful tool to help you identify searchable and filterable columns in your Eloquent models, suggest indexes for performance optimization, and analyze your data. By integrating this command into your development workflow, you can ensure that your filters are efficient and effective.</p>`,97)]))}const o=s(t,[["render",l],["__file","discover.html.vue"]]),c=JSON.parse('{"path":"/cli/discover.html","title":"Discover Command","lang":"en-US","frontmatter":{"sidebarDepth":1},"headers":[{"level":2,"title":"Basic Usage","slug":"basic-usage","link":"#basic-usage","children":[]},{"level":2,"title":"Options","slug":"options","link":"#options","children":[{"level":3,"title":"--suggest-indexes","slug":"suggest-indexes","link":"#suggest-indexes","children":[]},{"level":3,"title":"--create-indexes","slug":"create-indexes","link":"#create-indexes","children":[]},{"level":3,"title":"--analyze-data","slug":"analyze-data","link":"#analyze-data","children":[]},{"level":3,"title":"--connection","slug":"connection","link":"#connection","children":[]}]},{"level":2,"title":"Complete Workflow","slug":"complete-workflow","link":"#complete-workflow","children":[{"level":3,"title":"1. Discovery and Analysis","slug":"_1-discovery-and-analysis","link":"#_1-discovery-and-analysis","children":[]},{"level":3,"title":"2. Review Suggestions","slug":"_2-review-suggestions","link":"#_2-review-suggestions","children":[]},{"level":3,"title":"3. Create Indexes","slug":"_3-create-indexes","link":"#_3-create-indexes","children":[]}]},{"level":2,"title":"Output Breakdown","slug":"output-breakdown","link":"#output-breakdown","children":[{"level":3,"title":"Searchable Columns","slug":"searchable-columns","link":"#searchable-columns","children":[]},{"level":3,"title":"Filterable Columns","slug":"filterable-columns","link":"#filterable-columns","children":[]},{"level":3,"title":"Relationships","slug":"relationships","link":"#relationships","children":[]}]},{"level":2,"title":"Examples","slug":"examples","link":"#examples","children":[{"level":3,"title":"Example 1: Blog Post Model","slug":"example-1-blog-post-model","link":"#example-1-blog-post-model","children":[]},{"level":3,"title":"Example 2: E-commerce Product Model","slug":"example-2-e-commerce-product-model","link":"#example-2-e-commerce-product-model","children":[]},{"level":3,"title":"Example 3: User Model","slug":"example-3-user-model","link":"#example-3-user-model","children":[]}]},{"level":2,"title":"Index Recommendations","slug":"index-recommendations","link":"#index-recommendations","children":[{"level":3,"title":"Priority 1: Foreign Keys","slug":"priority-1-foreign-keys","link":"#priority-1-foreign-keys","children":[]},{"level":3,"title":"Priority 2: Frequently Filtered Columns","slug":"priority-2-frequently-filtered-columns","link":"#priority-2-frequently-filtered-columns","children":[]},{"level":3,"title":"Priority 3: Searchable Text Columns","slug":"priority-3-searchable-text-columns","link":"#priority-3-searchable-text-columns","children":[]}]},{"level":2,"title":"Best Practices","slug":"best-practices","link":"#best-practices","children":[]},{"level":2,"title":"Troubleshooting","slug":"troubleshooting","link":"#troubleshooting","children":[{"level":3,"title":"Model Not Found","slug":"model-not-found","link":"#model-not-found","children":[]},{"level":3,"title":"Connection Issues","slug":"connection-issues","link":"#connection-issues","children":[]},{"level":3,"title":"No Columns Discovered","slug":"no-columns-discovered","link":"#no-columns-discovered","children":[]},{"level":3,"title":"Index Creation Failed","slug":"index-creation-failed","link":"#index-creation-failed","children":[]}]},{"level":2,"title":"Advanced Usage","slug":"advanced-usage","link":"#advanced-usage","children":[{"level":3,"title":"Combining with Other Commands","slug":"combining-with-other-commands","link":"#combining-with-other-commands","children":[]},{"level":3,"title":"Batch Discovery","slug":"batch-discovery","link":"#batch-discovery","children":[]},{"level":3,"title":"CI/CD Integration","slug":"ci-cd-integration","link":"#ci-cd-integration","children":[]}]},{"level":2,"title":"Migration Generation","slug":"migration-generation","link":"#migration-generation","children":[]},{"level":2,"title":"Conclusion","slug":"conclusion","link":"#conclusion","children":[]}],"git":{"updatedTime":1761371878000,"contributors":[{"name":"kettasoft","email":"kettasoft@gmail.com","commits":1}]},"filePathRelative":"cli/discover.md"}');export{o as comp,c as data};
