import{_ as s,c as a,a as e,o as t}from"./app-DC3ExQOn.js";const i={};function p(l,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h1 id="exception-handling" tabindex="-1"><a class="header-anchor" href="#exception-handling"><span>Exception Handling</span></a></h1><p>Filterable provides a structured and predictable exception-handling system that allows engines to decide whether filtering should stop, skip the current filter, or continue normally.<br> This mechanism was redesigned to offer clearer behavior, improved safety, and better extensibility.</p><p>The system is built around three main components:</p><ul><li><strong>Exception types</strong> (how engines signal different situations)</li><li><strong>Handlers</strong> (how exceptions are processed)</li><li><strong>Configuration</strong> (how strict or lenient the system should behave)</li></ul><hr><h2 id="exception-flow-overview" tabindex="-1"><a class="header-anchor" href="#exception-flow-overview"><span>Exception Flow Overview</span></a></h2><p>During filtering, an engine may encounter invalid, empty, or malformed input. Instead of halting the entire process, the engine throws a specific exception to indicate what happened.</p><p>The handler then decides—based on the exception type and strict configuration— whether the exception should be:</p><ul><li><strong>thrown</strong> (stop filtering),</li><li><strong>or skipped</strong> (ignore this filter and continue with the next one).</li></ul><p>If a handler returns <code>false</code>, the current filter is skipped.</p><hr><h2 id="exception-types" tabindex="-1"><a class="header-anchor" href="#exception-types"><span>Exception Types</span></a></h2><p>Filterable defines two fundamental exception categories.<br> Each one represents a different kind of failure and implies different behavior.</p><h3 id="skipexecution" tabindex="-1"><a class="header-anchor" href="#skipexecution"><span><strong>SkipExecution</strong></span></a></h3><p><code>SkipExecution</code> is used when the engine cannot apply the filter, but the situation is not considered critical.</p><p>Typical scenarios include:</p><ul><li>empty values when the engine does not accept empty input,</li><li>unsupported operators,</li><li>incomplete data structures.</li></ul><p><strong>Behavior:</strong></p><ul><li>If strict mode is enabled → <strong>the exception is thrown</strong></li><li>If strict mode is disabled → <strong>the filter is skipped</strong></li></ul><p>This allows engines to ignore irrelevant or incomplete input without failing the whole filtering pipeline.</p><hr><h3 id="strictnessexception" tabindex="-1"><a class="header-anchor" href="#strictnessexception"><span><strong>StrictnessException</strong></span></a></h3><p><code>StrictnessException</code> represents invalid or unsafe input.<br> This type signals that the engine cannot proceed safely with the given data.</p><p>Examples include:</p><ul><li>corrupted or malformed values,</li><li>invalid structure or types,</li><li>contradictory or logically impossible conditions.</li></ul><p><strong>Behavior:</strong></p><ul><li>strict mode enabled → <strong>always thrown</strong></li><li>strict mode disabled → handler may return <code>false</code> to skip, but the exception indicates a more serious issue</li></ul><p>This class of exceptions enforces higher input correctness.</p><hr><h2 id="exception-handlers" tabindex="-1"><a class="header-anchor" href="#exception-handlers"><span>Exception Handlers</span></a></h2><p>Handlers determine what happens when an exception is thrown.<br> They receive both the exception and the engine instance.</p><p>Returning <code>false</code> means:<br><strong>&quot;Skip this filter and continue.&quot;</strong></p><p>Throwing the exception stops filtering immediately.</p><h3 id="exceptionhandlerinterface" tabindex="-1"><a class="header-anchor" href="#exceptionhandlerinterface"><span><strong>ExceptionHandlerInterface</strong></span></a></h3><p>Every handler must implement:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name-definition class-name">ExceptionHandlerInterface</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handle</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\\</span>Throwable</span> <span class="token variable">$exception</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Engine</span> <span class="token variable">$engine</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This gives full control to define how exceptions are processed.</p><hr><h2 id="helper-base-class-filterableexceptionhandler" tabindex="-1"><a class="header-anchor" href="#helper-base-class-filterableexceptionhandler"><span>Helper Base Class: FilterableExceptionHandler</span></a></h2><p><code>FilterableExceptionHandler</code> provides shared logic that custom handlers can use to simplify implementation.</p><p>Key helper methods:</p><ul><li><p><code>isStrictThrowing()</code> Checks whether global strict mode is enabled via config.</p></li><li><p><code>hasSkipping($exception)</code> Detects <code>SkipExecution</code>.</p></li><li><p><code>isStrictness($exception)</code> Detects strictness-related exceptions.</p></li></ul><p>Custom handlers may extend this abstract class to avoid duplicating logic.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name-definition class-name">FilterableExceptionHandler</span> <span class="token keyword">implements</span> <span class="token class-name">ExceptionHandlerInterface</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handle</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\\</span>Throwable</span> <span class="token variable">$exception</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Engine</span> <span class="token variable">$engine</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">isStrictThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;filterable.exception.strict&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">hasSkipping</span><span class="token punctuation">(</span><span class="token variable">$exception</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$exception</span> <span class="token keyword">instanceof</span> <span class="token class-name">SkipExecution</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">isStrictness</span><span class="token punctuation">(</span><span class="token variable">$exception</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$exception</span> <span class="token keyword">instanceof</span> <span class="token class-name">StrictnessException</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="defaulthandler-behavior" tabindex="-1"><a class="header-anchor" href="#defaulthandler-behavior"><span>DefaultHandler Behavior</span></a></h2><p>The default handler implements the standard strategy for both exception types:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">DefaultHandler</span> <span class="token keyword">extends</span> <span class="token class-name">FilterableExceptionHandler</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handle</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified"><span class="token punctuation">\\</span>Throwable</span><span class="token operator">|</span><span class="token class-name">SkipExecution</span> <span class="token variable">$exception</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Engine</span> <span class="token variable">$engine</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// SkipExecution: skip if not strict</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">hasSkipping</span><span class="token punctuation">(</span><span class="token variable">$exception</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$engine</span><span class="token operator">-&gt;</span><span class="token function">isStrict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">isStrictThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">throw</span> <span class="token variable">$exception</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// skip current filter</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// StrictnessException: throw when strict</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">isStrictness</span><span class="token punctuation">(</span><span class="token variable">$exception</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">isStrictThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token variable">$exception</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// default: skip non-critical cases</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="summary-of-behavior" tabindex="-1"><a class="header-anchor" href="#summary-of-behavior"><span>Summary of Behavior</span></a></h3><table><thead><tr><th>Exception Type</th><th>Strict Mode</th><th>Behavior</th></tr></thead><tbody><tr><td>SkipExecution</td><td>Enabled</td><td>Throw exception</td></tr><tr><td>SkipExecution</td><td>Disabled</td><td>Skip filter</td></tr><tr><td>StrictnessException</td><td>Enabled</td><td>Throw exception</td></tr><tr><td>StrictnessException</td><td>Disabled</td><td>Skip filter</td></tr></tbody></table><hr><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h2><p>Exception handling is defined in the <code>filterable.exceptions</code> config section:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token string single-quoted-string">&#39;exceptions&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line"></span>
<span class="line">    <span class="token string single-quoted-string">&#39;handler&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Kettasoft<span class="token punctuation">\\</span>Filterable<span class="token punctuation">\\</span>Exceptions<span class="token punctuation">\\</span>Handlers<span class="token punctuation">\\</span>DefaultHandler</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">    <span class="token string single-quoted-string">&#39;strict&#39;</span> <span class="token operator">=&gt;</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;FILTERABLE_EXCEPTION_STRICT&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="handler" tabindex="-1"><a class="header-anchor" href="#handler"><span><code>handler</code></span></a></h3><p>Defines the class responsible for handling exceptions.</p><p>Must implement: <code>ExceptionHandlerInterface</code>.</p><h3 id="strict" tabindex="-1"><a class="header-anchor" href="#strict"><span><code>strict</code></span></a></h3><p>When enabled:</p><ul><li>exceptions are always thrown,</li><li>skipping behavior is disabled,</li><li>engine-level strict settings are overridden.</li></ul><hr><h2 id="how-filter-skipping-works" tabindex="-1"><a class="header-anchor" href="#how-filter-skipping-works"><span>How Filter Skipping Works</span></a></h2><p>If the handler returns <code>false</code>, the current filter is skipped and the next filter is processed.</p><p>Example:</p><p>Filters: <strong>status</strong>, <strong>name</strong>, <strong>is_active</strong> Suppose:</p><ul><li><code>status</code> receives empty data,</li><li>engine does not accept empty values → throws <code>SkipExecution</code>.</li></ul><p>If strict mode is disabled:</p><ul><li><code>status</code> is skipped,</li><li>filtering continues with <code>name</code> then <code>is_active</code>.</li></ul><p>This allows the filtering pipeline to continue gracefully without failing because of optional or incomplete input.</p><hr><h2 id="creating-custom-handlers" tabindex="-1"><a class="header-anchor" href="#creating-custom-handlers"><span>Creating Custom Handlers</span></a></h2><p>To implement your own rules:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">MyCustomHandler</span> <span class="token keyword">extends</span> <span class="token class-name">FilterableExceptionHandler</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">handle</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified type-declaration"><span class="token punctuation">\\</span>Throwable</span> <span class="token variable">$exception</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Engine</span> <span class="token variable">$engine</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">bool</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// custom logic</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Register it in the config:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php" data-title="php"><pre><code><span class="line"><span class="token string single-quoted-string">&#39;exceptions&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;handler&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">App<span class="token punctuation">\\</span>Filters<span class="token punctuation">\\</span>Handlers<span class="token punctuation">\\</span>MyCustomHandler</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>This unified exception-handling pipeline provides:</p><ul><li>clear distinction between skip-level and failure-level issues,</li><li>configurable strictness,</li><li>customizable handlers,</li><li>consistent engine behavior,</li><li>predictable filter skipping.</li></ul><p>It enables robust and flexible filtering without breaking existing APIs.</p>`,80)]))}const c=s(i,[["render",p],["__file","exceptions.html.vue"]]),r=JSON.parse('{"path":"/exceptions.html","title":"Exception Handling","lang":"en-US","frontmatter":{"title":"Exception Handling","sidebarDepth":2},"headers":[{"level":2,"title":"Exception Flow Overview","slug":"exception-flow-overview","link":"#exception-flow-overview","children":[]},{"level":2,"title":"Exception Types","slug":"exception-types","link":"#exception-types","children":[{"level":3,"title":"SkipExecution","slug":"skipexecution","link":"#skipexecution","children":[]},{"level":3,"title":"StrictnessException","slug":"strictnessexception","link":"#strictnessexception","children":[]}]},{"level":2,"title":"Exception Handlers","slug":"exception-handlers","link":"#exception-handlers","children":[{"level":3,"title":"ExceptionHandlerInterface","slug":"exceptionhandlerinterface","link":"#exceptionhandlerinterface","children":[]}]},{"level":2,"title":"Helper Base Class: FilterableExceptionHandler","slug":"helper-base-class-filterableexceptionhandler","link":"#helper-base-class-filterableexceptionhandler","children":[]},{"level":2,"title":"DefaultHandler Behavior","slug":"defaulthandler-behavior","link":"#defaulthandler-behavior","children":[{"level":3,"title":"Summary of Behavior","slug":"summary-of-behavior","link":"#summary-of-behavior","children":[]}]},{"level":2,"title":"Configuration","slug":"configuration","link":"#configuration","children":[{"level":3,"title":"handler","slug":"handler","link":"#handler","children":[]},{"level":3,"title":"strict","slug":"strict","link":"#strict","children":[]}]},{"level":2,"title":"How Filter Skipping Works","slug":"how-filter-skipping-works","link":"#how-filter-skipping-works","children":[]},{"level":2,"title":"Creating Custom Handlers","slug":"creating-custom-handlers","link":"#creating-custom-handlers","children":[]},{"level":2,"title":"Conclusion","slug":"conclusion","link":"#conclusion","children":[]}],"git":{"updatedTime":1763576792000,"contributors":[{"name":"kettasoft","email":"kettasoft@gmail.com","commits":1}]},"filePathRelative":"exceptions.md"}');export{c as comp,r as data};
